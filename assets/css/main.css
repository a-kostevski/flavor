@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    counter-reset: sidenote;
  }

  /* Better focus styles */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-blue-500;
  }

  /* Selection color */
  ::selection {
    @apply bg-blue-500/20;
  }
}

@layer components {
  /* Grid pattern for hero */
  .bg-grid-pattern {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke='rgb(148 163 184 / 0.1)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e");
  }

  /* Admonition styles */
  .admonition {
    @apply rounded-xl p-5 mb-6 border-l-4;
  }

  .admonition figcaption {
    @apply flex items-center gap-2 font-semibold mb-3;
  }

  /* Sidenote styles */
  .sidenote-mark {
    @apply cursor-pointer;
  }

  .sidenote-mark:hover {
    @apply underline;
  }

  /* Table of Contents styling */
  .toc {
    @apply text-sm;
  }

  .toc ul {
    @apply list-none pl-0;
  }

  .toc > ul > li > ul {
    @apply pl-4;
  }

  .toc li {
    @apply py-1;
  }

  .toc a {
    @apply text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors;
  }

  .toc a.active {
    @apply text-blue-600 dark:text-blue-400 font-medium;
  }

  /* Article layout with ToC sidebar */
  .article-with-toc {
    display: block;
  }

  @media (min-width: 1024px) {
    .article-with-toc {
      display: grid;
      grid-template-columns: 1fr 250px;
      gap: 3rem;
    }
  }

  /* Sticky ToC sidebar */
  .toc-sidebar {
    @apply max-h-[calc(100vh-6rem)] overflow-y-auto pr-2;
    scrollbar-width: thin;
  }

  .toc-sidebar::-webkit-scrollbar {
    width: 4px;
  }

  .toc-sidebar::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-600 rounded;
  }

  /* Line clamp utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Code block enhancements */
  .highlight {
    @apply relative rounded-xl overflow-hidden;
  }

  .highlight pre {
    @apply p-5 overflow-x-auto text-sm leading-relaxed;
  }

  /* Pagination styling */
  .pagination {
    @apply flex items-center justify-center gap-2 mt-12;
  }

  .pagination .page-item {
    @apply px-4 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors;
  }

  .pagination .page-item.active {
    @apply bg-blue-600 text-white hover:bg-blue-700;
  }

  .pagination .page-item.disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  /* Card hover effects */
  .card-hover {
    @apply transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
  }

  /* Gradient text */
  .gradient-text {
    @apply text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600;
  }

  /* Skills bar */
  .skill-bar {
    @apply h-2 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden;
  }

  .skill-bar-fill {
    @apply h-full rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-1000;
  }

  /* Timeline */
  .timeline-item {
    @apply relative pl-8 pb-8 border-l-2 border-gray-200 dark:border-gray-700;
  }

  .timeline-item:last-child {
    @apply pb-0;
  }

  .timeline-dot {
    @apply absolute left-[-9px] top-0 w-4 h-4 rounded-full bg-blue-500 border-4 border-white dark:border-gray-900;
  }
}

@layer utilities {
  /* Screen reader only utility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Animations */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes blob {
    0%, 100% {
      transform: translate(0, 0) scale(1);
    }
    25% {
      transform: translate(20px, -30px) scale(1.1);
    }
    50% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    75% {
      transform: translate(30px, 10px) scale(1.05);
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @keyframes pulse-slow {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  .animate-fade-in {
    animation: fade-in 0.6s ease-out forwards;
    opacity: 0;
  }

  .animate-blob {
    animation: blob 7s infinite;
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }

  /* Animation delays */
  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  .animation-delay-600 {
    animation-delay: 600ms;
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }

  /* Smooth transitions for everything */
  .transition-smooth {
    @apply transition-all duration-300 ease-out;
  }

  /* Glassmorphism */
  .glass {
    @apply bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg;
  }

  /* Text gradient on hover */
  .hover-gradient:hover {
    @apply text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600;
  }
}
